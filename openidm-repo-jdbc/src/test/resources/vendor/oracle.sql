CREATE TABLE wrenidm.objecttypes (
  id NUMBER(24,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  objecttype VARCHAR2(255 CHAR),
  PRIMARY KEY (id),
  CONSTRAINT idx_objecttypes_objecttype UNIQUE (objecttype)
);

CREATE TABLE wrenidm.genericobjects (
  id NUMBER(24,0) GENERATED BY DEFAULT ON NULL AS IDENTITY,
  objecttypes_id NUMBER(24,0) NOT NULL,
  objectid VARCHAR2(255 CHAR) NOT NULL,
  rev VARCHAR2(38 CHAR) NOT NULL,
  fullobject CLOB,
  PRIMARY KEY (id),
  CONSTRAINT fk_genericobjects_objecttypes  FOREIGN KEY (objecttypes_id)
    REFERENCES wrenidm.objecttypes (id) ON DELETE CASCADE,
  CONSTRAINT idx_genericobjects_object UNIQUE (objecttypes_id, objectid)
);

CREATE TABLE wrenidm.genericobjectproperties (
  genericobjects_id NUMBER(24,0) NOT NULL,
  propkey VARCHAR2(255 CHAR) NOT NULL,
  proptype VARCHAR2(32 CHAR),
  propvalue VARCHAR2(2000 CHAR),
  CONSTRAINT fk_genericobjectproperties_genericobjects FOREIGN KEY (genericobjects_id)
    REFERENCES wrenidm.genericobjects (id) ON DELETE CASCADE
);
CREATE INDEX fk_genericobjectproperties_genericobjects ON wrenidm.genericobjectproperties (genericobjects_id);
CREATE INDEX idx_genericobjectproperties_prop ON wrenidm.genericobjectproperties (propkey, propvalue);

CREATE TABLE wrenidm.managedgreeting (
  objectid VARCHAR2(255 CHAR) NOT NULL,
  rev VARCHAR2(38 CHAR) NOT NULL,
  name VARCHAR2(255),
  priority INTEGER,
  ranking FLOAT,
  visible SMALLINT,
  tags VARCHAR2(255),
  meta VARCHAR2(2048),
  PRIMARY KEY (objectid)
);
